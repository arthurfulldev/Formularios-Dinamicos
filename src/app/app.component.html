<div class="container">
	<blockquote class="blockquote text center">
		<i class="fas fa-file-code"></i> Crear campos.
	</blockquote>
	<div class="accordion" id="groupFields">

		<div class="table-responsive">
			<table class="table table-striped table-sm">
				<thead>
					<tr>
						<th scope="col">#</th>
						<th scope="col">Nombre</th>
						<th scope="col">Requerido</th>
						<th scope="col">Reglas</th>
						<th scope="col">
							<div class="d-flex justify-content-center">
								<button class="btn btn-sm btn-success"><i class="fas fa-plus" data-toggle="tooltip" title="Agregar un campo nuevo"></i></button>
							</div>
						</th>
					</tr>
				</thead>
				<tbody [formGroup]="formulario">
					<tr>
						<th scope="row">1</th>
						<td><input class="form-control" type="text" name="nombre" placeholder="Nombre" data-toggle="tooltip" title="Escribe el nombre del campo"></td>
						<td>
							<input type="checkbox">
						</td>
						<td data-toggle="collapse" data-target="#field-1">
							<div class="d-flex justify-content-center">
								<i class="{{ !hide ? 'far fa-eye' : 'far fa-eye-slash' }}" (click)="hide = !hide" data-toggle="tooltip" title="{{ hide ? 'Ver reglas de este campo.': 'Ocultar reglas de este campo.' }}"></i>
							</div>
						</td>
						<td>
							<div class="d-flex justify-content-center">
								<i class="btn btn-sm btn-danger far fa-trash-alt" data-toggle="tooltip" title="Borrar este campo."></i>
							</div>
						</td>
					</tr>
					<td colspan="5" class="collapse border border-info" id="field-1" data-parent="#groupFields">
						<div class="container table-responsive">
							<strong>Reglas: </strong>
							<table class="table table-striped border border-info shadow-lg bg-white rounded">
								<thead>
									<tr>
										<th scope="col">#</th>
										<th scope="col">Nombre</th>
										<th scope="col">Argumentos</th>
										<th scope="col">
											<div class="d-flex justify-content-center">
												<button class="btn btn-sm btn-success"  (click)="addRule()">
													<i class="fas fa-plus" data-toggle="tooltip" title="Agregar una regla nueva."></i>
												</button>
											</div>
										</th>
									</tr>
								</thead>
								<tbody>
									<tr *ngFor="let rule of formulario.value | keyobj" formGroupName="{{rule.key}}">
										<td scope="row">{{ rule.key | ruleName }} </td>
										<td>
											<div class="form-group">
												<select class="form-control" formControlName="name" (change)="ruleSelected(rule.key)">
													<option value="0">-- Regla --</option>
													<option *ngFor="let rule of rules; let i = index" value="{{i+1}}" >{{rule.name}}</option>
												</select>
											</div>
										</td>
										<td class="pb-3">
											<div *ngIf="rule.value.arguments" formGroupName="arguments">
												<!-- <input *ngFor="let arg of rule.arguments" type="text" class="form-control" formControlName="{{arg.name}}"> -->
												
											</div>
										</td>
										<td>
											<div class="d-flex justify-content-center" (click)="deleteRule(rule.key)">
												<i class="btn btn-sm btn-danger far fa-trash-alt" data-toggle="tooltip" title="Borrar esta regla."></i>
											</div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</td>
				</tbody>
			</table>
		</div>
	</div>
</div>